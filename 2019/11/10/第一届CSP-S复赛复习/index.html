<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>第一届CSP-S复赛复习 | AndrewLee</title><meta name="keywords" content="复赛"><meta name="author" content="AndrewLee"><meta name="copyright" content="AndrewLee"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="是不是有点晚了?管那么多呢!">
<meta property="og:type" content="article">
<meta property="og:title" content="第一届CSP-S复赛复习">
<meta property="og:url" content="http://example.com/2019/11/10/%E7%AC%AC%E4%B8%80%E5%B1%8ACSP-S%E5%A4%8D%E8%B5%9B%E5%A4%8D%E4%B9%A0/index.html">
<meta property="og:site_name" content="AndrewLee">
<meta property="og:description" content="是不是有点晚了?管那么多呢!">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F911%2F100G5120150%2F15100G20150-8-1200.jpg&refer=http%3A%2F%2Fimg.jj20.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638695731&t=99236346a3f7f0be2fa9fb241bd94d66">
<meta property="article:published_time" content="2019-11-10T07:18:22.000Z">
<meta property="article:modified_time" content="2021-07-04T09:21:04.000Z">
<meta property="article:author" content="AndrewLee">
<meta property="article:tag" content="复赛">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F911%2F100G5120150%2F15100G20150-8-1200.jpg&refer=http%3A%2F%2Fimg.jj20.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638695731&t=99236346a3f7f0be2fa9fb241bd94d66"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2019/11/10/%E7%AC%AC%E4%B8%80%E5%B1%8ACSP-S%E5%A4%8D%E8%B5%9B%E5%A4%8D%E4%B9%A0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '第一届CSP-S复赛复习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-07-04 17:21:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/tit.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> others</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> about</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F911%2F100G5120150%2F15100G20150-8-1200.jpg&amp;refer=http%3A%2F%2Fimg.jj20.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1638695731&amp;t=99236346a3f7f0be2fa9fb241bd94d66')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">AndrewLee</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> others</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> about</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">第一届CSP-S复赛复习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-11-10T07:18:22.000Z" title="发表于 2019-11-10 15:18:22">2019-11-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-07-04T09:21:04.000Z" title="更新于 2021-07-04 17:21:04">2021-07-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%A4%8D%E8%B5%9B/">复赛</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>36分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="第一届CSP-S复赛复习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>是不是有点晚了?管那么多呢!</p>
<span id="more"></span>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=260 src="//music.163.com/outchain/player?type=0&id=3072955366&auto=1&height=430"></iframe>

<blockquote>
<p>2019年11月11日15:34:08 鉴于今天上午考试爆炸,我提前开始写这篇博客.</p>
</blockquote>
<p>复习什么呢?板子!当然更重要的是:遇到一题的时候的思维模式</p>
<h1 id="一些语法"><a href="#一些语法" class="headerlink" title="一些语法"></a>一些语法</h1><h1 id="lowbit"><a href="#lowbit" class="headerlink" title="lowbit"></a>lowbit</h1><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">lowbit</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">=</span>a<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">-</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99999518">原理分析</a></p>
<h1 id="板子"><a href="#板子" class="headerlink" title="板子"></a>板子</h1><h2 id="模拟退火"><a href="#模拟退火" class="headerlink" title="模拟退火"></a>模拟退火</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86685666">板子</a></p>
<h2 id="线段树"><a href="#线段树" class="headerlink" title="线段树"></a>线段树</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">loop</span><span class="token expression"><span class="token punctuation">(</span>i<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>start<span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>end<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ll</span> <span class="token expression"><span class="token keyword">long</span> <span class="token keyword">long</span></span></span>
<span class="token keyword">const</span> <span class="token keyword">int</span> maxn<span class="token operator">=</span><span class="token number">1000000</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span>
ll data<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>sum<span class="token punctuation">[</span>maxn<span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>lazy<span class="token punctuation">[</span>maxn<span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> n<span class="token punctuation">,</span>q<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">pushup</span><span class="token punctuation">(</span>ll rt<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    sum<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">=</span>sum<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>sum<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">pushdown</span><span class="token punctuation">(</span>ll rt<span class="token punctuation">,</span>ll len<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">;</span>
    lazy<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token punctuation">;</span>
    lazy<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token punctuation">;</span>
    sum<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>len<span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sum<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>len<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">buildtree</span><span class="token punctuation">(</span>ll l<span class="token punctuation">,</span>ll r<span class="token punctuation">,</span>ll rt<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">==</span>r<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        sum<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">=</span>data<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">int</span> m<span class="token operator">=</span><span class="token punctuation">(</span>l<span class="token operator">+</span>r<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">buildtree</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>m<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">buildtree</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pushup</span><span class="token punctuation">(</span>rt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>ll l<span class="token punctuation">,</span>ll r<span class="token punctuation">,</span>ll nl<span class="token punctuation">,</span>ll nr<span class="token punctuation">,</span>ll rt<span class="token punctuation">,</span>ll num<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>nl<span class="token operator">&amp;&amp;</span>nr<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">+=</span>num<span class="token punctuation">;</span>
        sum<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">+=</span><span class="token punctuation">(</span>nr<span class="token operator">-</span>nl<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>num<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">pushdown</span><span class="token punctuation">(</span>rt<span class="token punctuation">,</span>nr<span class="token operator">-</span>nl<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> m<span class="token operator">=</span><span class="token punctuation">(</span>nl<span class="token operator">+</span>nr<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token operator">&lt;</span>r<span class="token punctuation">)</span><span class="token function">add</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>nr<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token operator">>=</span>l<span class="token punctuation">)</span><span class="token function">add</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>nl<span class="token punctuation">,</span>m<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pushup</span><span class="token punctuation">(</span>rt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
ll <span class="token function">query</span><span class="token punctuation">(</span>ll l<span class="token punctuation">,</span>ll r<span class="token punctuation">,</span>ll nl<span class="token punctuation">,</span>ll nr<span class="token punctuation">,</span>ll rt<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>nl<span class="token operator">&amp;&amp;</span>nr<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
       <span class="token keyword">return</span> sum<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">pushdown</span><span class="token punctuation">(</span>rt<span class="token punctuation">,</span>nr<span class="token operator">-</span>nl<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ll m<span class="token operator">=</span><span class="token punctuation">(</span>nl<span class="token operator">+</span>nr<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">;</span>
    ll ans<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token operator">&lt;</span>r<span class="token punctuation">)</span>ans<span class="token operator">+=</span><span class="token function">query</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>nr<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>m<span class="token punctuation">)</span>ans<span class="token operator">+=</span><span class="token function">query</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>nl<span class="token punctuation">,</span>m<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">//freopen("datain.txt","r",stdin);</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%lld"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">buildtree</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>q<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> op<span class="token punctuation">;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>op<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            ll l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>x<span class="token punctuation">;</span>
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%lld%lld%lld"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>l<span class="token punctuation">,</span><span class="token operator">&amp;</span>r<span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">add</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            ll a<span class="token punctuation">,</span>b<span class="token punctuation">;</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%lld%lld"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld\n"</span><span class="token punctuation">,</span><span class="token function">query</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="exgcd-扩展欧几里得算法"><a href="#exgcd-扩展欧几里得算法" class="headerlink" title="exgcd 扩展欧几里得算法"></a>exgcd 扩展欧几里得算法</h2><p><strong>模版</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89789729">板子</a></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ll <span class="token function">exgcd</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span>ll b<span class="token punctuation">,</span>ll <span class="token operator">&amp;</span>x<span class="token punctuation">,</span>ll <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">int</span> g<span class="token operator">=</span><span class="token function">gcd</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>a<span class="token operator">%</span>b<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> t<span class="token operator">=</span>y<span class="token punctuation">;</span>
    y<span class="token operator">=</span>x<span class="token operator">-</span>a<span class="token operator">/</span>b<span class="token operator">*</span>y<span class="token punctuation">;</span>
    x<span class="token operator">=</span>t<span class="token punctuation">;</span>
    <span class="token keyword">return</span> g<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="树链剖分"><a href="#树链剖分" class="headerlink" title="树链剖分"></a>树链剖分</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89415360">链接</a></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">loop</span><span class="token expression"><span class="token punctuation">(</span>i<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">register</span> <span class="token keyword">int</span> i<span class="token operator">=</span>start<span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>end<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">anti_loop</span><span class="token expression"><span class="token punctuation">(</span>i<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">register</span> <span class="token keyword">int</span> i<span class="token operator">=</span>start<span class="token punctuation">;</span>i<span class="token operator">>=</span>end<span class="token punctuation">;</span><span class="token operator">--</span>i<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">clean</span><span class="token expression"><span class="token punctuation">(</span>arry<span class="token punctuation">,</span>num<span class="token punctuation">)</span> <span class="token function">memset</span><span class="token punctuation">(</span>arry<span class="token punctuation">,</span>num<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>arry<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">max</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">></span>b<span class="token punctuation">)</span><span class="token operator">?</span>a<span class="token operator">:</span>b<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">min</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">&lt;</span>b<span class="token punctuation">)</span><span class="token operator">?</span>a<span class="token operator">:</span>b<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ll</span> <span class="token expression"><span class="token keyword">long</span> <span class="token keyword">long</span></span></span>
<span class="token keyword">const</span> <span class="token keyword">int</span> maxn<span class="token operator">=</span><span class="token number">1e5</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> maxm<span class="token operator">=</span><span class="token number">1e5</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">,</span>root<span class="token punctuation">,</span>mod<span class="token punctuation">,</span>cnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> num<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> head<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> e<span class="token punctuation">;</span><span class="token keyword">int</span> nxt<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>edge<span class="token punctuation">[</span>maxn<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> dep<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>son<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>siz<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>fa<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//x的深度，重儿子，子树点个数，父节点</span>
<span class="token keyword">int</span> top<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>rev<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//x的重链头，在线段树中的位置，rev[x]指线段树中位置x对应的点</span>
ll sum<span class="token punctuation">[</span>maxn<span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>lazy<span class="token punctuation">[</span>maxn<span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">read</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">char</span> r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>T neg<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">&lt;</span><span class="token string">'0'</span><span class="token operator">||</span>r<span class="token operator">></span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">==</span><span class="token string">'-'</span><span class="token punctuation">)</span>neg<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">>=</span><span class="token string">'0'</span><span class="token operator">&amp;&amp;</span>r<span class="token operator">&lt;=</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>x<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span>x<span class="token operator">&lt;&lt;</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span>r<span class="token operator">-</span><span class="token string">'0'</span><span class="token punctuation">;</span>r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
    x<span class="token operator">*=</span>neg<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">pushup</span><span class="token punctuation">(</span><span class="token keyword">int</span> rt<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    sum<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">=</span>sum<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>sum<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">pushdown</span><span class="token punctuation">(</span><span class="token keyword">int</span> rt<span class="token punctuation">,</span><span class="token keyword">int</span> l<span class="token punctuation">,</span><span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        lazy<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token punctuation">,</span>lazy<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token punctuation">;</span>
        sum<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>l<span class="token operator">+</span>r<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span>l<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//等价于lazy[rt]*(mid-l+1)</span>
        sum<span class="token punctuation">[</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+=</span>lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>r<span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>l<span class="token operator">+</span>r<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//等价于lazy[rt]*(r-(mid+1)+1)</span>
        <span class="token comment">//这里注意加括号，否则优先级不正确代价很大</span>
        lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span><span class="token keyword">int</span> r<span class="token punctuation">,</span><span class="token keyword">int</span> rt<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">==</span>r<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        sum<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">=</span>num<span class="token punctuation">[</span>rev<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">int</span> mid<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span>l<span class="token operator">+</span>r<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注意大小于符号的方向！</span>
    <span class="token function">build</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>mid<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pushup</span><span class="token punctuation">(</span>rt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
ll <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span><span class="token keyword">int</span> r<span class="token punctuation">,</span><span class="token keyword">int</span> nl<span class="token punctuation">,</span><span class="token keyword">int</span> nr<span class="token punctuation">,</span><span class="token keyword">int</span> rt<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>nl<span class="token operator">&amp;&amp;</span>nr<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">pushdown</span><span class="token punctuation">(</span>rt<span class="token punctuation">,</span>nl<span class="token punctuation">,</span>nr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> mid<span class="token operator">=</span><span class="token punctuation">(</span>nl<span class="token operator">+</span>nr<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">;</span>
    ll _sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>mid<span class="token operator">>=</span>l<span class="token punctuation">)</span>_sum<span class="token operator">+=</span><span class="token function">query</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>nl<span class="token punctuation">,</span>mid<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>mid<span class="token operator">&lt;</span>r<span class="token punctuation">)</span>_sum<span class="token operator">+=</span><span class="token function">query</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>nr<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> _sum<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span><span class="token keyword">int</span> r<span class="token punctuation">,</span><span class="token keyword">int</span> nl<span class="token punctuation">,</span><span class="token keyword">int</span> nr<span class="token punctuation">,</span><span class="token keyword">int</span> rt<span class="token punctuation">,</span><span class="token keyword">int</span> w<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>l<span class="token operator">&lt;=</span>nl<span class="token operator">&amp;&amp;</span>nr<span class="token operator">&lt;=</span>r<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        lazy<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">+=</span>w<span class="token punctuation">;</span>
        sum<span class="token punctuation">[</span>rt<span class="token punctuation">]</span><span class="token operator">+=</span><span class="token punctuation">(</span>nr<span class="token operator">-</span>nl<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>w<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">pushdown</span><span class="token punctuation">(</span>rt<span class="token punctuation">,</span>nl<span class="token punctuation">,</span>nr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> mid<span class="token operator">=</span><span class="token punctuation">(</span>nl<span class="token operator">+</span>nr<span class="token punctuation">)</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>mid<span class="token operator">>=</span>l<span class="token punctuation">)</span><span class="token function">update</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>nl<span class="token punctuation">,</span>mid<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">,</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>mid<span class="token operator">&lt;</span>r<span class="token punctuation">)</span><span class="token function">update</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>nr<span class="token punctuation">,</span>rt<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pushup</span><span class="token punctuation">(</span>rt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">dfs2</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> f<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//第二个dfs维护出seg，rev，top三个数组</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//一定要先维护重儿子的标记，使得在线段树区间内重链连续排列</span>
        seg<span class="token punctuation">[</span>son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">++</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        rev<span class="token punctuation">[</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>
        top<span class="token punctuation">[</span>son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>top<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">dfs2</span><span class="token punctuation">(</span>son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>head<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>i<span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">=</span>edge<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nxt<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//维护完重儿子后再维护轻儿子</span>
        <span class="token keyword">int</span> v<span class="token operator">=</span>edge<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>e<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>top<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//排除掉重儿子和父节点</span>
            seg<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">++</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            rev<span class="token punctuation">[</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>v<span class="token punctuation">;</span>
            top<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">=</span>v<span class="token punctuation">;</span>
            <span class="token function">dfs2</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">dfs1</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> f<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//第一次dfs维护出fa，dep，siz，son四个数组</span>
    fa<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span>f<span class="token punctuation">;</span>
    dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span>dep<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    siz<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>head<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>i<span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">=</span>edge<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nxt<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> v<span class="token operator">=</span>edge<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>e<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token operator">==</span>f<span class="token punctuation">)</span><span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token function">dfs1</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
        siz<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">+=</span>siz<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>
        son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span>siz<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">></span>siz<span class="token punctuation">[</span>son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span>v<span class="token operator">:</span>son<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">addl</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    edge<span class="token punctuation">[</span>cnt<span class="token punctuation">]</span><span class="token punctuation">.</span>e<span class="token operator">=</span>v<span class="token punctuation">;</span>
    edge<span class="token punctuation">[</span>cnt<span class="token punctuation">]</span><span class="token punctuation">.</span>nxt<span class="token operator">=</span>head<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>
    head<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span>cnt<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">reply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//回答函数</span>
    <span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> op<span class="token punctuation">;</span><span class="token function">read</span><span class="token punctuation">(</span>op<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">int</span> x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">;</span><span class="token function">read</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">read</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">read</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> fx<span class="token operator">=</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span>fy<span class="token operator">=</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>fx<span class="token operator">!=</span>fy<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token operator">&lt;</span>dep<span class="token punctuation">[</span>fy<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token function">swap</span><span class="token punctuation">(</span>fx<span class="token punctuation">,</span>fy<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">update</span><span class="token punctuation">(</span>seg<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
                x<span class="token operator">=</span>fa<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token punctuation">,</span>fx<span class="token operator">=</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">></span>dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">update</span><span class="token punctuation">(</span>seg<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">int</span> x<span class="token punctuation">,</span>y<span class="token punctuation">;</span><span class="token function">read</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">read</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>ll res<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> fx<span class="token operator">=</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span>fy<span class="token operator">=</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>fx<span class="token operator">!=</span>fy<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token operator">&lt;</span>dep<span class="token punctuation">[</span>fy<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token function">swap</span><span class="token punctuation">(</span>fx<span class="token punctuation">,</span>fy<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
                res<span class="token operator">+=</span><span class="token function">query</span><span class="token punctuation">(</span>seg<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>res<span class="token operator">%=</span>mod<span class="token punctuation">;</span>
                x<span class="token operator">=</span>fa<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token punctuation">,</span>fx<span class="token operator">=</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">></span>dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            res<span class="token operator">+=</span><span class="token function">query</span><span class="token punctuation">(</span>seg<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld\n"</span><span class="token punctuation">,</span>res<span class="token operator">%</span>mod<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">int</span> x<span class="token punctuation">,</span>z<span class="token punctuation">;</span><span class="token function">read</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">read</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">update</span><span class="token punctuation">(</span>seg<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">+</span>siz<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">int</span> x<span class="token punctuation">;</span><span class="token function">read</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld\n"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token function">query</span><span class="token punctuation">(</span>seg<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">+</span>siz<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">ONLINE_JUDGE</span></span>
    <span class="token function">freopen</span><span class="token punctuation">(</span><span class="token string">"datain.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">,</span><span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
    <span class="token function">clean</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clean</span><span class="token punctuation">(</span>dep<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clean</span><span class="token punctuation">(</span>siz<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clean</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clean</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clean</span><span class="token punctuation">(</span>lazy<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">read</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">read</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">read</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">read</span><span class="token punctuation">(</span>mod<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token function">read</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> ui<span class="token punctuation">,</span>vi<span class="token punctuation">;</span>
        <span class="token function">read</span><span class="token punctuation">(</span>ui<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">read</span><span class="token punctuation">(</span>vi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addl</span><span class="token punctuation">(</span>ui<span class="token punctuation">,</span>vi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addl</span><span class="token punctuation">(</span>vi<span class="token punctuation">,</span>ui<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">dfs1</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    top<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token operator">=</span>root<span class="token punctuation">,</span>seg<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>rev<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>root<span class="token punctuation">,</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//由于dfs2中无法对根节点赋值，因此要在dfs2以前将根的三个参数全部赋值完毕</span>
    <span class="token comment">//seg[0]代表线段树中的点的个数</span>
    <span class="token function">dfs2</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">build</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>seg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">reply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="线性筛"><a href="#线性筛" class="headerlink" title="线性筛"></a>线性筛</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> prime<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>cnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> v<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//v[i]意思就是i的最小质因子</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">shai</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token function">clean</span><span class="token punctuation">(</span>prime<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">clean</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//若i是质数,记录</span>
			prime<span class="token punctuation">[</span><span class="token operator">++</span>cnt<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">;</span>
			v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token function">loop</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>cnt<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token comment">//对i乘上一个质因子prime[j],要保证这个质因子是i*prime[j]的最小质因子</span>
		<span class="token comment">//(其实就是尝试用i和prime[j]组合成一个数)</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">*</span>prime<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">></span>n<span class="token operator">||</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span>prime<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token comment">//如果i的最小质因子比prime[j]小,那么就不用再乘了</span>
			v<span class="token punctuation">[</span>i<span class="token operator">*</span>prime<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>prime<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token comment">//否则记录</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="Splay"><a href="#Splay" class="headerlink" title="Splay"></a>Splay</h2><h3 id="手写版本"><a href="#手写版本" class="headerlink" title="手写版本"></a>手写版本</h3><p>(<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87476686">感觉已经来不及复习了,而且性价比太低了</a>)</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">loop</span><span class="token expression"><span class="token punctuation">(</span>i<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">register</span> <span class="token keyword">int</span> i<span class="token operator">=</span>start<span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>end<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ll</span> <span class="token expression"><span class="token keyword">long</span> <span class="token keyword">long</span></span></span>
<span class="token keyword">const</span> <span class="token keyword">int</span> maxn<span class="token operator">=</span><span class="token number">100000</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> INF<span class="token operator">=</span><span class="token number">1e9</span><span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">read</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">char</span> r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>T neg<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">></span><span class="token string">'9'</span><span class="token operator">||</span>r<span class="token operator">&lt;</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">==</span><span class="token string">'-'</span><span class="token punctuation">)</span>neg<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">>=</span><span class="token string">'0'</span><span class="token operator">&amp;&amp;</span>r<span class="token operator">&lt;=</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>x<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span>x<span class="token operator">&lt;&lt;</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span>r<span class="token operator">-</span><span class="token string">'0'</span><span class="token punctuation">;</span>r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
    x<span class="token operator">*=</span>neg<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> f<span class="token punctuation">;</span>
    <span class="token keyword">int</span> siz<span class="token punctuation">;</span>
    <span class="token keyword">int</span> cnt<span class="token punctuation">;</span>
    <span class="token keyword">int</span> son<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> w<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>tree<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> numofp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>root<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">getpos</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span>x<span class="token punctuation">)</span><span class="token operator">?</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token operator">=</span>tree<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token operator">+</span>tree<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token operator">+</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">Ro</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> f<span class="token operator">=</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">;</span>
	<span class="token keyword">int</span> ff<span class="token operator">=</span>tree<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">;</span>
    <span class="token keyword">int</span> s<span class="token operator">=</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">getpos</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> posx<span class="token operator">=</span><span class="token function">getpos</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> posf<span class="token operator">=</span><span class="token function">getpos</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span>posx<span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token operator">=</span>f<span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>ff<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span>posf<span class="token punctuation">]</span><span class="token operator">=</span>x<span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token operator">=</span>ff<span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span>posx<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>f<span class="token punctuation">;</span>
    tree<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token operator">=</span>x<span class="token punctuation">;</span><span class="token comment">//same!</span>
    <span class="token function">update</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">update</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">Splay</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> to<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token operator">!=</span>to<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> f<span class="token operator">=</span>tree<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">,</span>ff<span class="token operator">=</span>tree<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ff<span class="token operator">!=</span>to<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">getpos</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token operator">==</span><span class="token function">getpos</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">Ro</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token function">Ro</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">Ro</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>root<span class="token operator">=</span>x<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">int</span> w<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> _p<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> cur<span class="token operator">=</span>root<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token operator">&amp;&amp;</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token operator">!=</span>w<span class="token punctuation">)</span>_p<span class="token operator">=</span>cur<span class="token punctuation">,</span>cur<span class="token operator">=</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span>w<span class="token operator">></span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span><span class="token punctuation">&#123;</span>
        cur<span class="token operator">=</span><span class="token operator">++</span>numofp<span class="token punctuation">;</span>
		tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token operator">=</span>w<span class="token punctuation">;</span>
        tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>tree<span class="token punctuation">[</span>numofp<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token operator">=</span>_p<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>_p<span class="token punctuation">)</span>tree<span class="token punctuation">[</span>_p<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span>w<span class="token operator">></span>tree<span class="token punctuation">[</span>_p<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token punctuation">]</span><span class="token operator">=</span>cur<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">Splay</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">_find</span><span class="token punctuation">(</span><span class="token keyword">int</span> _w<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> cur<span class="token operator">=</span>root<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token operator">!=</span>_w<span class="token operator">&amp;&amp;</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token operator">&lt;</span>_w<span class="token punctuation">]</span><span class="token punctuation">)</span>
		cur<span class="token operator">=</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token operator">&lt;</span>_w<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">Splay</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">getrank</span><span class="token punctuation">(</span><span class="token keyword">int</span> _w<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token function">_find</span><span class="token punctuation">(</span>_w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token operator">&lt;</span>_w<span class="token punctuation">)</span><span class="token keyword">return</span> tree<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token operator">+</span>tree<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">return</span> tree<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">_findKth</span><span class="token punctuation">(</span><span class="token keyword">int</span> _x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> cur<span class="token operator">=</span>root<span class="token punctuation">;</span>
    <span class="token keyword">int</span> _rank<span class="token operator">=</span>_x<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>_rank<span class="token operator">&lt;=</span>tree<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token punctuation">)</span>cur<span class="token operator">=</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>_rank<span class="token operator">&lt;=</span>tree<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token operator">+</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">)</span><span class="token keyword">return</span> cur<span class="token punctuation">;</span>
		<span class="token keyword">else</span> _rank<span class="token operator">-=</span>tree<span class="token punctuation">[</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token operator">+</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">,</span>cur<span class="token operator">=</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">pre</span><span class="token punctuation">(</span><span class="token keyword">int</span> _w<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token function">_find</span><span class="token punctuation">(</span>_w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token operator">&lt;</span>_w<span class="token punctuation">)</span><span class="token keyword">return</span> root<span class="token punctuation">;</span>
    <span class="token keyword">int</span> cur<span class="token operator">=</span>tree<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>cur<span class="token operator">=</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">bac</span><span class="token punctuation">(</span><span class="token keyword">int</span> _w<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token function">_find</span><span class="token punctuation">(</span>_w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token operator">></span>_w<span class="token punctuation">)</span><span class="token keyword">return</span> root<span class="token punctuation">;</span>
    <span class="token keyword">int</span> cur<span class="token operator">=</span>tree<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>cur<span class="token operator">=</span>tree<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token keyword">int</span> _w<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> fr<span class="token operator">=</span><span class="token function">pre</span><span class="token punctuation">(</span>_w<span class="token punctuation">)</span><span class="token punctuation">,</span>ba<span class="token operator">=</span><span class="token function">bac</span><span class="token punctuation">(</span>_w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Splay</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Splay</span><span class="token punctuation">(</span>ba<span class="token punctuation">,</span>fr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> _del<span class="token operator">=</span>tree<span class="token punctuation">[</span>ba<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>_del<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token operator">></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">--</span>tree<span class="token punctuation">[</span>_del<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">,</span><span class="token function">Splay</span><span class="token punctuation">(</span>_del<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> tree<span class="token punctuation">[</span>ba<span class="token punctuation">]</span><span class="token punctuation">.</span>son<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">register</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span><span class="token function">read</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">register</span> <span class="token keyword">int</span> opt<span class="token punctuation">,</span>x<span class="token punctuation">;</span>
    <span class="token function">in</span><span class="token punctuation">(</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">-</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">read</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">read</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token function">in</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token function">del</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span><span class="token function">getrank</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>tree<span class="token punctuation">[</span><span class="token function">_findKth</span><span class="token punctuation">(</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token operator">==</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>tree<span class="token punctuation">[</span><span class="token function">pre</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>opt<span class="token operator">==</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>tree<span class="token punctuation">[</span><span class="token function">bac</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="STL版本"><a href="#STL版本" class="headerlink" title="STL版本"></a>STL版本</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">loop</span><span class="token expression"><span class="token punctuation">(</span>i<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">register</span> <span class="token keyword">int</span> i<span class="token operator">=</span>start<span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>end<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">anti_loop</span><span class="token expression"><span class="token punctuation">(</span>i<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">register</span> <span class="token keyword">int</span> i<span class="token operator">=</span>start<span class="token punctuation">;</span>i<span class="token operator">>=</span>end<span class="token punctuation">;</span><span class="token operator">--</span>i<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">clean</span><span class="token expression"><span class="token punctuation">(</span>arry<span class="token punctuation">,</span>num<span class="token punctuation">)</span> <span class="token function">memset</span><span class="token punctuation">(</span>arry<span class="token punctuation">,</span>num<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>arry<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">max</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">></span>b<span class="token punctuation">)</span><span class="token operator">?</span>a<span class="token operator">:</span>b<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">min</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">&lt;</span>b<span class="token punctuation">)</span><span class="token operator">?</span>a<span class="token operator">:</span>b<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ll</span> <span class="token expression"><span class="token keyword">long</span> <span class="token keyword">long</span></span></span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">read</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">char</span> r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>T neg<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">></span><span class="token string">'9'</span><span class="token operator">||</span>r<span class="token operator">&lt;</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">==</span><span class="token string">'-'</span><span class="token punctuation">)</span>neg<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">>=</span><span class="token string">'0'</span><span class="token operator">&amp;&amp;</span>r<span class="token operator">&lt;=</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>x<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span>x<span class="token operator">&lt;&lt;</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span>r<span class="token operator">-</span><span class="token string">'0'</span><span class="token punctuation">;</span>r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
    x<span class="token operator">*=</span>neg<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">int</span> n<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token function">read</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">register</span> <span class="token keyword">int</span> op<span class="token punctuation">,</span>x<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span>vec<span class="token punctuation">;</span>
	<span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token function">read</span><span class="token punctuation">(</span>op<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">read</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>
	    vec<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">lower_bound</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span>
            vec<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">lower_bound</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span><span class="token function">lower_bound</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token operator">-</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>vec<span class="token punctuation">[</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token operator">==</span><span class="token number">5</span><span class="token punctuation">)</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>vec<span class="token punctuation">[</span><span class="token function">lower_bound</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token operator">-</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>vec<span class="token punctuation">[</span><span class="token function">upper_bound</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token operator">-</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="LIS-LCS"><a href="#LIS-LCS" class="headerlink" title="LIS,LCS"></a>LIS,LCS</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/96433490">记得<strong>看看</strong>!</a></p>
<h1 id="小学奥数题-amp-思维题"><a href="#小学奥数题-amp-思维题" class="headerlink" title="小学奥数题&amp;思维题"></a>小学奥数题&amp;思维题</h1><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88910217">noip 2012 D1T1 luogu P1079 Vigenère 密码</a></p>
<p>不要去傻傻的打表,去发现这个大表里面的公式.(当然如果降智降得厉害,打表也不是不行)</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86617154">noip 2017 Day1 T1 小凯的疑惑</a></p>
<p>这题真的是…..一言难尽,尝试打表吧,证明不出来的</p>
<h1 id="不-基础算法"><a href="#不-基础算法" class="headerlink" title="(不)基础算法"></a>(不)基础算法</h1><h2 id="模拟"><a href="#模拟" class="headerlink" title="模拟"></a>模拟</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87875516">【noip 2015 D1T1】P2615 神奇的幻方</a></p>
<p>模拟即可</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86616019">noip 2017 Day1 T2 时间复杂度</a></p>
<p>大模拟..</p>
<h2 id="随机化"><a href="#随机化" class="headerlink" title="随机化"></a>随机化</h2><p>这是个好东西,但是慎用</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88926984">luogu P2210 Haywire</a></p>
<p><strong>模拟退火!</strong>,记得<strong>看一下</strong>,骗分利器!</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86700146">JSOI2004 平衡点 / 吊打XXX</a></p>
<p><strong>模拟退火模版题</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88914313">noip 2012 Day2 T2 P1080 国王游戏</a></p>
<p>根本不会猜贪心的蒟蒻只能够用随机化了,能够水60分呢</p>
<h2 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88599380">MZOJ P1420 ABCDEF</a></p>
<p>记得<strong>复习</strong>!</p>
<h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100010412">POJ2676/3074 Sudoku</a></p>
<p>数独,让人自闭的码农题,不想说了</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99988172">luogu P1731 [NOI1999]生日蛋糕</a></p>
<p>关键是剪枝,<strong>使用了放缩法剪枝!</strong>(感觉自己一辈子都用不来的东西)</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99984684">luogu P1120 小木棍 ［数据加强版］</a></p>
<p>搜索+剪枝</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90740234">luogu P1074 靶形数独</a></p>
<p>爆搜啊</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90112945">luogu P1118 [USACO06FEB]数字三角形Backward Digit Su…</a></p>
<p>杨辉三角(组合数)加速搜索</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90110694">luogu P3956 棋盘</a></p>
<p>记忆化搜索</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87871754">【noip 2015 Day1 T3】luogu P2668 斗地主</a></p>
<p>这搜索是真的煎熬..</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86747656">Luogu P1141 01迷宫</a></p>
<p>BFS染色</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86635872">[USACO08FEB]流星雨Meteor Shower</a></p>
<p>BFS搜索即可</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86632665">mzoj 1345 英雄 hero</a></p>
<p>宽搜,注意对弹簧的判断</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86631446">mzoj P1344 工作依赖</a></p>
<p>思路很简单,可以<strong>看看</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86763012">Luogu P1092 虫食算</a></p>
<p>注意搜索顺序</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86649598">Luogu P1189 SEARCH</a></p>
<p>这题输入非常鬼畜</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86642731">vijos P1159 打水</a></p>
<p><strong>迭代加深</strong>,这是个好东西,记得<strong>复习</strong>!</p>
<h2 id="二分"><a href="#二分" class="headerlink" title="二分"></a>二分</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100122917">UVA11090 Going in Cycle!!</a></p>
<p>关键是发现其中的单调性.其实大部分的二分都是这样</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87535596">codevs 1021 玛丽卡</a></p>
<p>可以用分层图解决,但是也可以二分套spfa,是一个经典模型了</p>
<h3 id="01分数规划"><a href="#01分数规划" class="headerlink" title="01分数规划"></a>01分数规划</h3><p><a target="_blank" rel="noopener" href="https://andrew82106.github.io/2019/09/06/01%E5%88%86%E6%95%B0%E8%A7%84%E5%88%92%E7%9A%84%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/#more">模型在这里了</a></p>
<p>一般遇到题就想办法去抽象出这个模型就可以了.而且一般来讲,这种算法只能够求<strong>最优比率</strong></p>
<p>最好在考前手推一下这些个题</p>
<p><strong>例题</strong>们:</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100829241">luogu P3199 [HNOI2009]最小圈</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100629553">luogu P4377 [USACO18OPEN]Talent Show</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100592814">luogu P2868 [USACO07DEC]观光奶牛Sightseeing Cows</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100587262">POJ P2728 Desert King</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100585150">POJ 2976 Dropping tests</a></p>
<h2 id="差分"><a href="#差分" class="headerlink" title="差分"></a>差分</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86708353">luogu P1438 无聊的数列</a></p>
<p><strong>一阶差分</strong>+线段树</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87116403">luogu P4231 三步必杀</a></p>
<p><strong>二阶差分!</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/96493802">LOJ #10131. 「一本通 4.4 例 2」暗的连锁</a></p>
<p>树上差分好题一枚.将每条主要边的权值定义为经过它的附加边的条数,这样一来就可以枚举每一条主要边然后得解了</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88355926">luogu P3128 [USACO15DEC]最大流Max Flow(树上差分之点差分板子题)</a></p>
<p>树上差分<strong>模版</strong>,点差分</p>
<h1 id="DP-动态规划"><a href="#DP-动态规划" class="headerlink" title="DP(动态规划)"></a>DP(动态规划)</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89844820">某一次DP测试(有时间就<strong>看看</strong>也行)</a></p>
<h2 id="线性DP"><a href="#线性DP" class="headerlink" title="线性DP"></a>线性DP</h2><p><strong>NOIP2018道路铺设</strong>:</p>
<p>对于第i个坑,要么被前面的一起填掉,要么自己还要新开一个坑,于是设高度d,分类讨论:</p>
<p>$$<br>f[i]=\begin{cases}<br>f[i-1] \ (d[i-1]&lt;=d[i])\f[i-1]+d[i-1]-d<a href="d%5Bi-1%5D%3Ed%5Bi%5D">i</a><br>\end{cases}<br>$$</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97685226">「一本通 6.2 练习 2」[USACO08DEC] Patting Heads 轻拍牛头</a></p>
<p>这题关键是要注意到能够被整除的数之间的关系</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89604421">luogu P1025 数的划分</a></p>
<p>这题还比较值得研究,其中的<strong>划分形DP</strong>和<strong>去重</strong>的处理都很有借鉴意义</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88765021">luogu P1164 小A点菜</a></p>
<p>状态设计来自于答案,考虑转移的时候尝试考虑决策或”考虑最后一步”即可找出方程然后AC</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88762479">luogu P2062 分队问题</a></p>
<p>一个有效的经验:<strong>数组无序的时候,进行等效的排序</strong>,状态设计仍然来自于答案,考虑转移的时候仍然尝试考虑决策</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88757320">luogu P1541 乌龟棋</a></p>
<p>很简单的暴力DP,状态设计仍然来自于答案…(省略几个字)..但是暴力DP现在luogu上不能拿满分了</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88718680">luogu P1977 出租车拼车</a></p>
<p>仍然秉承上面的原则就可以做出这题</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88650927">luogu P2066 机器分配</a></p>
<p>继续秉承上面的原则就可以做出这题</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88620761">luogu P3399 丝绸之路</a></p>
<p>仍然继续秉承上面的原则就可以做出这题</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88756954">luogu P1439 【模板】最长公共子序列——【LIS的nlogn解法详解】</a></p>
<p>是一个很好的利用离散化的例子,可以<strong>复习</strong>一下</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86681834">120718 测试 NOIP 模拟题 T3 最大数列</a></p>
<p>比较经典的模型:<strong>求一个序列中两个不相交连续的子序列的最大和</strong>,利用了前缀和和后缀和思想解题</p>
<h2 id="棋盘DP"><a href="#棋盘DP" class="headerlink" title="棋盘DP"></a>棋盘DP</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86679406">120718 测试 NOIP 模拟题 T2迷宫</a></p>
<p>棋盘DP,统计最短路条数</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86661262">noip 2008 T3 luogu P1006 传纸条</a></p>
<p>棋盘DP,可以<strong>复习</strong>一下</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86633874">noip 2000 Day2 T6 方格取数</a></p>
<p>好像是和前面这题神似呢</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86651376">noip 2002 普及组 T4 过河卒</a></p>
<p>有时候有一些题看上去可以用搜索,但实际上只能够使用棋盘DP来解决,这里列出来的棋盘DP大都是这个样子</p>
<h2 id="数位DP"><a href="#数位DP" class="headerlink" title="数位DP"></a>数位DP</h2><p>这个考试遇到了只有狗带的份</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/91491843">luogu P2602 [ZJOI2010]数字计数</a></p>
<h2 id="区间DP"><a href="#区间DP" class="headerlink" title="区间DP"></a>区间DP</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97169456">两道区间DP</a></p>
<h2 id="树形DP"><a href="#树形DP" class="headerlink" title="树形DP"></a>树形DP</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/85221550">总结过的博客</a></p>
<p><del>但是树形DP还是学的巨水无比</del></p>
<h2 id="状态压缩DP"><a href="#状态压缩DP" class="headerlink" title="状态压缩DP"></a>状态压缩DP</h2><p>二进制状压一般用作表示集合中元素的选取情况,使用条件(特征)是$2^n$比较小(考到3进制状压算我倒霉好吧)</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86659376">[SCOI2005]互不侵犯 Luogu P1896</a></p>
<p>状压DP入门之一</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88743835">luogu P2704 [NOI2001]炮兵阵地</a></p>
<p>一道经典状压DP,注意状态的设计和很多细节</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86655828">[SCOI2007]排列 luogu P4163</a></p>
<p>一道不错的状压题目,核心仍然是利用状态压缩在表示集合的选取然后进行DP</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/102329473">luogu P4363 [九省联考2018]一双木棋chess</a></p>
<p>这是我做到的比较好的一题了.这题的关键是想到<strong>可以用一条从左下到右上的对角线来表示当前棋盘的状态</strong></p>
<h2 id="背包"><a href="#背包" class="headerlink" title="背包"></a>背包</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/96029101">luogu P1064 金明的预算方案</a></p>
<p>这题依赖的物品数比较少,因此可以用分组背包来解决,就懒得去打一个树形DP了</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/95970148">信息学奥赛一本通P1271：【例9.15】潜水员</a></p>
<p>二维费用背包<strong>模版</strong>题(都快忘了,记得<strong>复习</strong>)</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/95727268">luogu P2918 [USACO08NOV]买干草Buying Hay</a></p>
<p>完全背包(非<strong>模版</strong>)+估计上限</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/95726674">luoguP1833 樱花</a></p>
<p>二进制拆分对混合背包非常有效!</p>
<p>资料:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/95520385">背包问题详解!</a></p>
<h2 id="树形DP-1"><a href="#树形DP-1" class="headerlink" title="树形DP"></a>树形DP</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90577361">luogu P2986 [USACO10MAR]伟大的奶牛聚集Great Cow Gat…</a></p>
<p>树的重心,重点,记得<strong>复习</strong>!</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90548307">这一篇的T3</a></p>
<p>树的重心和最小生成树的综合</p>
<h1 id="字符串算法"><a href="#字符串算法" class="headerlink" title="字符串算法"></a>字符串算法</h1><p>这个考到了基本上$CSP$就没了</p>
<h2 id="字典树"><a href="#字典树" class="headerlink" title="字典树"></a>字典树</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88763447">luogu P1481 魔族密码</a></p>
<p>巧妙的使用字典树避免了DP的各种煞笔细节(字典树还是可以<strong>看一下</strong>的)</p>
<h2 id="manacher算法"><a href="#manacher算法" class="headerlink" title="manacher算法"></a>manacher算法</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88381256">luogu P3805 【模板】manacher算法</a></p>
<p>有时间就去看下吧(估计也不会去看~~)</p>
<h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/85527041">链接</a></p>
<p>就这样了,不敢再说什么了</p>
<h2 id="AC自动机"><a href="#AC自动机" class="headerlink" title="AC自动机"></a>AC自动机</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/84869366">链接</a></p>
<p>不要去想了~~</p>
<h1 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h1><h2 id="强连通分量SCC"><a href="#强连通分量SCC" class="headerlink" title="强连通分量SCC"></a>强连通分量SCC</h2><p>一般来讲,考scc的题都是要分析联通性和scc里面的某些特殊性质的</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90577982">总结过的博客</a></p>
<p><strong>模版</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90312358">luogu P3387 【模板】缩点</a></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100546826">luogu P1726 上白泽慧音</a></p>
<p>认真读题后发现是个<strong>模版</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100074179">UVA - 247 Calling Circles</a></p>
<p>认真读题后也发现是个<strong>模版</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90512295">loj #10094. 「一本通 3.5 练习 2」消息的传递</a></p>
<p>裸<strong>模版</strong>题</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90293444">luogu P2341 [HAOI2006]受欢迎的牛</a></p>
<p>关键是要分析出来连接关系</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100536036">P2921 [USACO08DEC]在农场万圣节Trick or Treat on the Farm</a></p>
<p>这题乍一看不是很简单,实际上分析出scc里面的性质:<strong>一个奶牛获得的糖果数等于其所在scc的点的糖果总数</strong>,就是一道<strong>模版</strong>题罢了</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90344986">loj #10095 P1262 间谍网络</a></p>
<p>tarjan+贪心</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99627441">luogu P2515 [HAOI2010]软件安装</a></p>
<p>缩点后树形DP(树形DP学的太菜,走了~~)</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90511940">luogu P2746 #10093. [USACO5.3]校园网Network of Schools</a></p>
<p>需要稍加分析,得出结论<strong>答案为入度和出度的差</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90519005">loj #10092 luogu P2272 [ZJOI2007]最大半连通子图</a></p>
<p>这题主要是太多数学符号了,看得人眼花缭乱的.其实不算特别难</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/90513997">loj #10096 luogu P3627 [APIO2009]抢掠计划</a></p>
<p>tarjan+spfa/拓扑排序,收集在我的luogu题库里面的一道<strong>模版</strong>题</p>
<h2 id="MST问题-最小生成树"><a href="#MST问题-最小生成树" class="headerlink" title="MST问题(最小生成树)"></a>MST问题(最小生成树)</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87626762">luogu P2330 [SCOI2005]繁忙的都市</a></p>
<p>稍加分析后可以发现本题就是求一个MST</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86776811">luogu P1340 兽径管理</a></p>
<p>不断加边的kruskal</p>
<h2 id="树链剖分-1"><a href="#树链剖分-1" class="headerlink" title="树链剖分"></a>树链剖分</h2><p>这个东西,板子还比较熟练,但是做过的题少有比较好的呢</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/95212971">总结过的链接</a></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89420871">luogu P3178 [HAOI2015]树上操作</a></p>
<p>模版</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89429854">luogu P3833 [SHOI2012]魔法树</a></p>
<p>模版</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89601964">luogu P3038 [USACO11DEC]牧草种植Grass Planting</a></p>
<p>边权转点权的树链剖分</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89555455">luogu P3950 部落冲突</a></p>
<p>边权转点权的树链剖分</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89531056">luogu P2146 [NOI2015]软件包管理器</a></p>
<p>这是一个比较好的树链剖分题了.要分析出依赖关系从而得到操作的本质和树链剖分支持的操作的关系</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89431159">P3258 [JLOI2014]松鼠的新家</a></p>
<p>可以用树上差分做,同时可以用树剖.</p>
<h3 id="树链剖分求lca"><a href="#树链剖分求lca" class="headerlink" title="树链剖分求lca"></a>树链剖分求lca</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88542197">luogu P3398 仓鼠找sugar</a> </p>
<p>关键是一个很好的性质:<strong>某一条路径起点和终点的LCA被包含在另外一条路径上</strong>,可反证证明</p>
<h2 id="最短路"><a href="#最短路" class="headerlink" title="最短路"></a>最短路</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100822052">luogu P4943 密室</a></p>
<p>关键是<strong>意识到两个角色的等价性以及拥有大力分类讨论的意识</strong>,入手点为<strong>考虑路径可能经过的点的情况</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100547417">luogu P2384 最短路</a></p>
<p>关键是能够知道<strong>出现了乘法,我们可以用对数来将其转化为加法</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100116038">UVA10537 The Toll! Revisited</a></p>
<p>秉承<strong>正难则反</strong>的原则,反向跑最短路,再加一点分类讨论即可</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100083952">It’s not a Bug, it’s a Feature! UVA - 658</a></p>
<p>用状态压缩来表示bug的有无（0没有，1有),然后就可以把每个bug的状态表示的数看做点，然后就可以从（11111…111）开始，枚举每一个补丁(lrj大佬说这叫做隐式图搜索)，判断并且进行状态转移</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99684510">P2176 [USACO14FEB]路障Roadblock</a></p>
<p>暴力即可</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97623556">luogu P1608 路径统计</a></p>
<p>最短路计数,经典问题了.不要忘了怎么转移数量的!最好考前<strong>看看</strong>(<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87539372">最短路计数<strong>模版</strong></a>)</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89597876">luogu P1280 尼克的任务</a></p>
<p>本是DP,但是是可以转化为图论模型的,值得借鉴的一个思路</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87389323">luogu P1339 [USACO09OCT]热浪Heat Wave</a></p>
<p>模版</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87345208">P2850 [USACO06DEC]虫洞Wormholes</a></p>
<p>spfa判负环,<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87343303">模版</a>记得<strong>复习</strong>!</p>
<h3 id="分层图最短路"><a href="#分层图最短路" class="headerlink" title="分层图最短路"></a>分层图最短路</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/andrew82/p/11377712.html">系统整理过的博客~~</a></p>
<p><strong>例题</strong>们:</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100085337">UVA11374 Airport Express</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100043897">luogu P4011 孤岛营救问题 #10073. 「一本通 3.2 例 2」拯救大兵瑞恩</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99730390">luogu P3831 [SHOI2012]回家的路</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99655897">luogu P4568 [JLOI2011]飞行路线</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99650287">luogu P3119 [USACO15JAN]草鉴定Grass Cownoisseur</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87603968">MZOJ 行动！行动!</a></p>
<h3 id="最短路树-图"><a href="#最短路树-图" class="headerlink" title="最短路树(图)"></a>最短路树(图)</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100106518">UVA1416 Warfare And Logistics</a></p>
<p>利用最短路图优化的暴力,因为<strong>删除的边如果不在最短路图上,那么整个图中不会有某个点的最短路数组dis[i]被改变</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100107552">UVA10917 Walk Through the Forest</a></p>
<p>可以从最短路图的角度去理解,还可以直接暴力理解~~</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100112012">CF1005F Berland and the Shortest Paths</a></p>
<p>最短路(图)树有很多很好的性质,其中之一就体现在这个题里面.<del>我们也许可以尝试去往题里面套算法?</del>,利用反证法可以得出最短路图就是本题的最优答案</p>
<h3 id="差分约束"><a href="#差分约束" class="headerlink" title="差分约束"></a>差分约束</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100185233">差分约束算法原理博客</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/andrew82/p/11444839.html">系统的整理过题型的博客</a></p>
<p>考前好好<strong>看看</strong></p>
<p><strong>例题</strong>们:</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100160414">「一本通 3.4 例 1」 POJ 1201-Intervals</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100334772">luogu P4878 [USACO05DEC] 布局</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100177816">luogu P1993 小K的农场</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100308865">poj1275 「一本通 3.4 例 2」出纳员问题</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100205441">luogu P3084 [USACO13OPEN]照片Photo</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100177864">luogu P3275 [SCOI2011]糖果</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100184160">UVA11478 Halum</a></p>
<h3 id="次短路"><a href="#次短路" class="headerlink" title="次短路"></a>次短路</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100546826">luogu P2865 [USACO06NOV]路障Roadblocks</a></p>
<p>重要模型!考前看一看其中的分类讨论</p>
<h2 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">loop</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span>
    <span class="token function">loop</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span>
        <span class="token function">loop</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这三行代码就是这个算法的核心,其中第一行代码可以<strong>大改</strong></p>
<h3 id="传递闭包"><a href="#传递闭包" class="headerlink" title="传递闭包"></a>传递闭包</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100525274">POJ 1094_Sorting It All Out</a></p>
<p><del>这是一道实现起来很恶心的题</del>.关键是<strong>把不等关系转化为一个二维数组,利用传递闭包来得到关系长度大于1的点之间的关系</strong></p>
<h3 id="最短路-amp-最长路"><a href="#最短路-amp-最长路" class="headerlink" title="最短路&amp;最长路"></a>最短路&amp;最长路</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100165283">luogu P1522 牛的旅行 Cow Tours</a></p>
<p>入手点和前面那道<strong>密室</strong>有点像,都是对最后的答案——在这里就是添加的那条边引起的变化——大力讨论(其实这题讨论不算大力),然后得到相应的答案</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100163069">luogu P1119 灾后重建</a></p>
<p>关键是:<strong>动态又具有一定单调性限制的最短路就要考虑Floyd</strong>,这时我们是通过修改Floyd最外层的循环得到解的</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87200112">P2888 [USACO07NOV]牛栏Cow Hurdles</a></p>
<p>稍微改一下方程即可</p>
<h3 id="Floyd和矩阵快速幂"><a href="#Floyd和矩阵快速幂" class="headerlink" title="Floyd和矩阵快速幂"></a>Floyd和矩阵快速幂</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100067761">poj3613 ACwing 345：Cow Relays–牛站</a></p>
<p><del>Floyd和矩阵有着千丝万缕的联系,而矩阵又和快速幂有着说不清道不明的关系,于是Floyd和矩阵快速幂就有千丝万缕的说不清道不明的关系了</del></p>
<p>关键是推导出这个<strong>广义的矩阵乘法</strong>满足分配率,于是就可以把矩阵乘法替换成”广义矩阵乘法”</p>
<h3 id="Floyd求无向图最小环"><a href="#Floyd求无向图最小环" class="headerlink" title="Floyd求无向图最小环"></a>Floyd求无向图最小环</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/100034570">一本通 3.2 例 1 Sightseeing Trip</a></p>
<p><strong>枚举一个k和和它相邻的两个点，看这三个点能否构成一个最小环</strong>,具体实现看代码</p>
<h2 id="建图技巧"><a href="#建图技巧" class="headerlink" title="建图技巧"></a>建图技巧</h2><h3 id="虚点连边"><a href="#虚点连边" class="headerlink" title="虚点连边"></a>虚点连边</h3><p>虚点连边是一种很有效的优化建边复杂度的方式</p>
<p><strong>Part1</strong></p>
<p>我们可能会遇见这样一种题，给你几个点，其他的点离这些给出的点的最近距离是多少。</p>
<p>我们可以对于每一个点进行最短路，但似乎这样并不是很好操作。</p>
<p>我们可以自己给出一个点，然后向每个被标记的点连一条单向边，这样就只需要进行一次最短路就可以了。</p>
<p>举个例子，橙色为标记点，数字为最近距离。</p>
<p><img src="https://z4a.net/images/2019/02/25/k1ef821096fa7bd112.png"></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/102488361">luogu P3393 逃离僵尸岛</a></p>
<p><strong>Part2</strong></p>
<p>如果对于两个点集A和B，你需要对A中的每一个点向B中的每一个点都建一条边，如果直接操作，复杂度很明显是 $O(n^2)$的，有没有更快的方法呢？</p>
<p>我们可以建一个虚点P，然后对A里的每一个点向P连一条单向边边，然后对P向B中的每一个点建一条单向边，这样只需要$O(2n)$ 的复杂度就可以完成了。</p>
<p><img src="https://z4a.net/images/2019/02/25/k3.png"></p>
<h2 id="网络流"><a href="#网络流" class="headerlink" title="网络流"></a>网络流</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/84705855">链接</a></p>
<p>没得搞,不会.</p>
<h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><p>一类题:<a target="_blank" rel="noopener" href="https://www.cnblogs.com/andrew82/p/11372305.html">并查集求连通块</a></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87875642">【noip 2015 D1T2】luogu P2661 信息传递</a></p>
<p>并查集求最小环!经典模型,记得<strong>复习</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86596024">noip2017 Day2 T1——cheese</a></p>
<p>也可以搜索,但是用并查集实现会更加简单</p>
<h2 id="单调数据结构"><a href="#单调数据结构" class="headerlink" title="单调数据结构"></a>单调数据结构</h2><p>有了单调性,我们就可以很容易的(一般是$O(1)$)的取出某个集合里的最值</p>
<h3 id="单调栈"><a href="#单调栈" class="headerlink" title="单调栈"></a>单调栈</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/88602295">mzojP1419 浇水</a></p>
<p>单调栈的<strong>模版</strong>题(但是我都快忘了!),<strong>复习</strong>.</p>
<h3 id="单调队列"><a href="#单调队列" class="headerlink" title="单调队列"></a>单调队列</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86660762">luogu P1886 滑动窗口</a></p>
<p>经典的<strong>模版</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101388148">luogu P1440 求m区间内的最小值</a></p>
<p>单调队列<strong>模版</strong>,滑动窗口的形式化描述.</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/102329947">luogu P2827 [NOIP 2016] 蚯蚓</a></p>
<p>这一题的关键是发现:<strong>先被切的蚯蚓中的相应段总是比后被切的蚯蚓中的相应段长</strong>这一单调性.</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101385664">acwing135. 最大子序和</a></p>
<p>本题十分经典,求长度不超过m的最大子序列和.<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_30277239/article/details/90017084">关键</a>是<strong>把最大子序和用前缀和的形式表达出来,然后对于每一个位置找前面的最小的前缀和</strong>,从而转化成单调队列的<strong>模版</strong>题.</p>
<h4 id="单调队列优化DP"><a href="#单调队列优化DP" class="headerlink" title="单调队列优化DP"></a>单调队列优化DP</h4><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101509908">POJ 1821 Fence</a></p>
<p>单调队列优化DP使用的条件是:</p>
<ol>
<li>最优化(min,max等)</li>
<li>对象变量的取值范围单向变化(上下界一起向上或向下)</li>
</ol>
<p>一般的分析步骤:</p>
<ol>
<li>分析对象变量的取值范围</li>
<li>分析单调队列中的决策的单调性</li>
</ol>
<p>具体见上面的链接+<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101388861">这个链接</a></p>
<h2 id="带根号的数据结构"><a href="#带根号的数据结构" class="headerlink" title="带根号的数据结构"></a>带根号的数据结构</h2><h3 id="莫队"><a href="#莫队" class="headerlink" title="莫队"></a>莫队</h3><p>这可是号称可以解决任何区间问题的算法!优美的暴力,为了骗分最好还是<strong>看一下</strong>!</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89053097">luogu P2709 小B的询问</a></p>
<p>莫队<strong>模版</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86773471">luogu P1972 [SDOI2009] HH的项链</a></p>
<p>奇偶优化<strong>模版</strong>(当然现在在luogu上也过不了了)</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86771386">luogu P3901 数列找不同</a></p>
<h2 id="带对数的数据结构"><a href="#带对数的数据结构" class="headerlink" title="带对数的数据结构"></a>带对数的数据结构</h2><h3 id="线段树-1"><a href="#线段树-1" class="headerlink" title="线段树"></a>线段树</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86702018">luogu P5097 [USACO2004OPEN]Cave Cows 2 洞穴里的牛之二</a></p>
<p><strong>模版</strong>题</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/102328281">luogu P2824 [HEOI2016/TJOI2016]排序</a></p>
<p>这题主要是要发现<strong>对一个01序列的排序可以用log级别的线段树来操作</strong>,也就是统计区间的和,然后把前面的赋值为0,后面的赋值为1就行了,本质上是一个区间修改+单点查询的线段树</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97022865">luogu P2023 [AHOI2009]维护序列</a></p>
<p>经典的乘法线段树,记得<strong>看看</strong>!</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/96755644">UVA10587 Mayor’s posters</a></p>
<p>好题一枚!关键是<strong>离散化</strong>和<strong>考虑维护的值</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89815319">luogu P2184 贪婪大陆</a></p>
<p>关键是发现:<strong>一个区间的结尾必定对应一个在其前面的开头</strong>.若我们查询到这个询问的右界的左边[0,R]有x个地雷区间的开头，左界的左边[0,L-1]有y个地雷区间的结束，由于一个区间的结尾必定对应一个在其前面的开头，故区间[L,R]中颜色的个数就等于x-y，类似于差分的思想</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89785337">luogu P2574 XOR的艺术 P3870 [TJOI2009]开关</a></p>
<p>和异或相关的位运算.由于异或的封闭性,考虑用lazy标记来保存一个区间被异或的情况.由于一个区间里面的0和1的个数是可以用区间和求出来的,因此这个题就可以只维护一个区间和,也就是一个区间修改和查询的线段树,只是lazy标记有点不一样</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/87807211">luogu P1198 [JSOI2008]最大数</a></p>
<p>看似要动态开点,实际上可以预先开够空间,然后直接加就行</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/86699856">noip 2012 提高组 Day2 T2 LuoguP1083 借教室</a></p>
<p>按照时间来建线段树(有一丢丢线段树分治的味道)</p>
<h4 id="线段树分治"><a href="#线段树分治" class="headerlink" title="线段树分治"></a>线段树分治</h4><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101373828">「雅礼集训 2018 Day10」贪玩蓝月</a></p>
<p>基本思想就是:<strong>离线询问,按照时间顺序建线段树,每个节点要保存影响,然后最后一遍dfs求出所有询问</strong>,(但是感觉考场上想得出来也不一定打得出来~~)</p>
<h3 id="平衡树"><a href="#平衡树" class="headerlink" title="平衡树"></a>平衡树</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/96285856">luogu P2286 [HNOI2004]宠物收养场</a></p>
<p><strong>模版</strong>题..</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/96175831">luogu P2234 [HNOI2002]营业额统计</a></p>
<p>稍加分析就知道是一道<strong>模版</strong>题</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/95458075">luogu P1486 [NOI2004]郁闷的出纳员</a></p>
<p>乍一看以为要写一个区间修改,但实际上只需要保存一个全局变量表记录工资变化量,之后的员工就直接加上这个变化量就可以了</p>
<h1 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h1><h2 id="数论"><a href="#数论" class="headerlink" title="数论"></a>数论</h2><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/99543065">约数之和(在这篇文章的后面)</a></p>
<p>关键是要知道<strong>唯一分解定理及其推论</strong>,然后可以了解一下<strong>分治求等比数列</strong>,这个题可以好好<strong>康康</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97815154">「一本通 6.4 例 4」曹冲养猪</a></p>
<p><strong>中国剩余定理</strong>模版****,考前记得<strong>复习</strong>!</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97792804">「一本通 6.2 练习 5」luoguP1445 [Violet]樱花</a></p>
<p><del>这是一道狗粮题</del>.关键是会推式子!这个题的推导过程比较有意思,可以<strong>看看</strong>(好像链接里的推导有一点点不影响结果的小错误)</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97683317">「一本通 6.2 例 1」 UVA10140 Prime Distance[线性筛]</a></p>
<p>基本思想是<strong>变相打表</strong>,也就是不把所有的表打完,而只打一部分,利用这一部分来取得我们需要的另外一部分</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97662515">「一本通 6.3 例 1」luogu P1463 [POI2002][HAOI2007]反素数</a></p>
<p><strong>答案肯定是在小于n里面的因数个数最大的数中最小的一个</strong>,因此根据唯一分解定理,爆搜即可,数据范围有保障的</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97630183">「一本通 6.4 例 1」 luogu P1516 青蛙的约会</a></p>
<p><strong>可以把两只青蛙的位置转化为同余意义下的式子,因此可以列出等式从而求解</strong></p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97618692">UVA756 Biorhythms</a></p>
<p>中国剩余定理的<strong>模版</strong>,记得<strong>看看</strong>!</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97614587">luogu P3811 【模板】乘法逆元</a></p>
<p>乘法逆元的<strong>模版</strong>,这个比较熟了</p>
<p><strong>资料:</strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/97294953">数论锦集!</a></p>
<h2 id="计算几何"><a href="#计算几何" class="headerlink" title="计算几何"></a>计算几何</h2><p>这个考到了只有持矢</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89048090">P2742 【模板】二维凸包 / [USACO5.1]圈奶牛Fencing the Cows</a></p>
<p>二维凸包$CSP$可能会考吗?估计不会,反正考到只有凉凉</p>
<p><strong>例题</strong>:<a href="">luogu P1452 Beauty Contest</a><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89071224">https://blog.csdn.net/weixin_43907802/article/details/89071224</a></p>
<p>话说这是另外一个叫做$Andrew$的大佬发明的算法,叫做$Andrew$算法呢</p>
<h2 id="线性基"><a href="#线性基" class="headerlink" title="线性基"></a>线性基</h2><p>*<em><strong>模版</strong>:</em>*<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/89840961">luogu P3812 【模板】线性基</a></p>
<p><del>这个还是和xyx一起学的,但我敢保证我们两个现在都忘了这东西怎么实现了</del></p>
<h2 id="初级线性代数"><a href="#初级线性代数" class="headerlink" title="初级线性代数"></a>初级线性代数</h2><h3 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101165247">noip模拟 矩阵加速递推 数学老师的报复</a></p>
<p>矩阵加速递推式,主要是要会<a target="_blank" rel="noopener" href="https://andrew82106.github.io/2019/09/21/%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95%E5%8A%A0%E9%80%9F%E9%80%92%E6%8E%A8%E5%BC%8F%E8%AE%A1%E7%AE%97/#more">构造矩阵</a>.会构造转置矩阵后,使用矩阵快速幂就可以解决问题了(矩阵乘法完美满足结合律!)</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ll</span> <span class="token expression"><span class="token keyword">long</span> <span class="token keyword">long</span></span></span>
ll n<span class="token punctuation">,</span>mod<span class="token operator">=</span><span class="token number">1e9</span><span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">;</span>
ll k<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> maxn<span class="token operator">=</span><span class="token number">100</span><span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">martix</span>
<span class="token punctuation">&#123;</span>
	ll m<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>e<span class="token punctuation">;</span>
<span class="token keyword">inline</span> ll <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
   ll ans<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span> r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">&lt;</span><span class="token string">'0'</span><span class="token operator">||</span>r<span class="token operator">></span><span class="token string">'9'</span><span class="token punctuation">)</span>r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">while</span><span class="token punctuation">(</span>r<span class="token operator">>=</span><span class="token string">'0'</span><span class="token operator">&amp;&amp;</span>r<span class="token operator">&lt;=</span><span class="token string">'9'</span><span class="token punctuation">)</span>
   <span class="token punctuation">&#123;</span>
      ans<span class="token operator">=</span>ans<span class="token operator">*</span><span class="token number">10</span><span class="token operator">+</span>r<span class="token operator">-</span><span class="token string">'0'</span><span class="token punctuation">;</span>
      r<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
   <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
martix <span class="token function">datasetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
	martix x<span class="token punctuation">;</span>
	n<span class="token operator">=</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%lld"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
	      x<span class="token punctuation">.</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
martix <span class="token function">mut</span><span class="token punctuation">(</span>martix a<span class="token punctuation">,</span>martix b<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
	martix ans<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span>ans<span class="token punctuation">.</span>m<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ans<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
		   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> p<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>p<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>p<span class="token operator">++</span><span class="token punctuation">)</span>
			   ans<span class="token punctuation">.</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>ans<span class="token punctuation">.</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">%</span>mod<span class="token operator">+</span>a<span class="token punctuation">.</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token operator">*</span>b<span class="token punctuation">.</span>m<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>
	<span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">printans</span><span class="token punctuation">(</span>martix x<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
	      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld "</span><span class="token punctuation">,</span>x<span class="token punctuation">.</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">%</span>mod<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">fastpower</span><span class="token punctuation">(</span>martix x<span class="token punctuation">,</span>ll t<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
	martix wei<span class="token operator">=</span>x<span class="token punctuation">;</span>
	martix res<span class="token operator">=</span>e<span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span>res<span class="token operator">=</span><span class="token function">mut</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span>wei<span class="token punctuation">)</span><span class="token punctuation">;</span>
		wei<span class="token operator">=</span><span class="token function">mut</span><span class="token punctuation">(</span>wei<span class="token punctuation">,</span>wei<span class="token punctuation">)</span><span class="token punctuation">;</span>
		t<span class="token operator">>>=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token function">printans</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
   martix xx<span class="token operator">=</span><span class="token function">datasetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
      e<span class="token punctuation">.</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token function">fastpower</span><span class="token punctuation">(</span>xx<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/********************************************************************
   ID:Andrew_82
   LANG:C++
   PROG:fast power
********************************************************************/</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="概率期望"><a href="#概率期望" class="headerlink" title="概率期望"></a>概率期望</h2><p>期望的定义是$\sum P_i\times W_i$</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101307554">luogu P4316 绿豆蛙的归宿</a></p>
<p>根据定义dfs,记录距离和概率,最后相加就行</p>
<p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101204833">「雅礼集训 2018 Day10」足球大战</a></p>
<p>这题有两个难点:<strong>根据组合数公式列出主队赢球的概率式子</strong>,<strong>发现这个式子是可以O(n)递推的</strong></p>
<h3 id="期望DP"><a href="#期望DP" class="headerlink" title="期望DP"></a>期望DP</h3><p><strong>例题</strong>:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43907802/article/details/101292760">luoguP1850 NOIP2016 换教室</a></p>
<p>需要知道<strong>期望的线性性</strong>,也就是期望是可以掰开递推的.具体看博客吧(DP方程太长不好搬运).<del>至于如何掰开,就是强行掰开啊!!</del></p>
<h1 id="最后的最后"><a href="#最后的最后" class="headerlink" title="最后的最后"></a>最后的最后</h1><blockquote>
<p>update 2019年12月1日12:00:14</p>
</blockquote>
<p>以上的复习内容基本没有压中这次CSP-S的考点,因此,显而易见的,Andrew光荣的省三退役了(虽然成绩还没有出来,但结果是可以预料的)</p>
<p>这几天的常规学习日子真是不好过啊,毕竟要2个月学完一学期的课程,这工作量不是开玩笑的.</p>
<p>对了,前几天看到一个同学写的退役记,我觉得写的很有水平呢 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_25845753/article/details/103080408">这里是传送门!</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">AndrewLee</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2019/11/10/%E7%AC%AC%E4%B8%80%E5%B1%8ACSP-S%E5%A4%8D%E8%B5%9B%E5%A4%8D%E4%B9%A0/">http://example.com/2019/11/10/%E7%AC%AC%E4%B8%80%E5%B1%8ACSP-S%E5%A4%8D%E8%B5%9B%E5%A4%8D%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">AndrewLee</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%A4%8D%E8%B5%9B/">复赛</a></div><div class="post_share"><div class="social-share" data-image="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F911%2F100G5120150%2F15100G20150-8-1200.jpg&amp;refer=http%3A%2F%2Fimg.jj20.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1638695731&amp;t=99236346a3f7f0be2fa9fb241bd94d66" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/11/13/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E5%BE%AE%E7%A7%AF%E5%88%86%E8%AF%BB%E6%9C%AC-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E7%BB%AD1/"><img class="prev-cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2017-10-19%2F59e85568dcb46.jpg%3Fdown&amp;refer=http%3A%2F%2Fpic1.win4000.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1638695731&amp;t=751aef03ff04665aafa66556eb677f73" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">普林斯顿微积分读本-阅读笔记-续1</div></div></a></div><div class="next-post pull-right"><a href="/2019/11/09/%E7%BD%91%E5%9D%80%E5%A4%A7%E8%B5%8F/"><img class="next-cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2018-11-06%2F5be1579bc7da3.jpg%3Fdown&amp;refer=http%3A%2F%2Fpic1.win4000.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1638695731&amp;t=4532ee56537217508d6298ed431ff2eb" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">网址小赏</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/tit.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">AndrewLee</div><div class="author-info__description">Gubba nub nub doo rahkah</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Andrew82106" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=281512383&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="http://180.76.162.227:5000/" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E8%AF%AD%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">一些语法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lowbit"><span class="toc-number">2.</span> <span class="toc-text">lowbit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%BF%E5%AD%90"><span class="toc-number">3.</span> <span class="toc-text">板子</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E9%80%80%E7%81%AB"><span class="toc-number">3.1.</span> <span class="toc-text">模拟退火</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E6%AE%B5%E6%A0%91"><span class="toc-number">3.2.</span> <span class="toc-text">线段树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#exgcd-%E6%89%A9%E5%B1%95%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E7%AE%97%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">exgcd 扩展欧几里得算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86"><span class="toc-number">3.4.</span> <span class="toc-text">树链剖分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E6%80%A7%E7%AD%9B"><span class="toc-number">3.5.</span> <span class="toc-text">线性筛</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Splay"><span class="toc-number">3.6.</span> <span class="toc-text">Splay</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%86%99%E7%89%88%E6%9C%AC"><span class="toc-number">3.6.1.</span> <span class="toc-text">手写版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STL%E7%89%88%E6%9C%AC"><span class="toc-number">3.6.2.</span> <span class="toc-text">STL版本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LIS-LCS"><span class="toc-number">3.7.</span> <span class="toc-text">LIS,LCS</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E5%AD%A6%E5%A5%A5%E6%95%B0%E9%A2%98-amp-%E6%80%9D%E7%BB%B4%E9%A2%98"><span class="toc-number">4.</span> <span class="toc-text">小学奥数题&amp;思维题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8D-%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95"><span class="toc-number">5.</span> <span class="toc-text">(不)基础算法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F"><span class="toc-number">5.1.</span> <span class="toc-text">模拟</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E5%8C%96"><span class="toc-number">5.2.</span> <span class="toc-text">随机化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hash"><span class="toc-number">5.3.</span> <span class="toc-text">hash</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2"><span class="toc-number">5.4.</span> <span class="toc-text">搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E5%88%86"><span class="toc-number">5.5.</span> <span class="toc-text">二分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#01%E5%88%86%E6%95%B0%E8%A7%84%E5%88%92"><span class="toc-number">5.5.1.</span> <span class="toc-text">01分数规划</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%AE%E5%88%86"><span class="toc-number">5.6.</span> <span class="toc-text">差分</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DP-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92"><span class="toc-number">6.</span> <span class="toc-text">DP(动态规划)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E6%80%A7DP"><span class="toc-number">6.1.</span> <span class="toc-text">线性DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A3%8B%E7%9B%98DP"><span class="toc-number">6.2.</span> <span class="toc-text">棋盘DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E4%BD%8DDP"><span class="toc-number">6.3.</span> <span class="toc-text">数位DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BA%E9%97%B4DP"><span class="toc-number">6.4.</span> <span class="toc-text">区间DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E5%BD%A2DP"><span class="toc-number">6.5.</span> <span class="toc-text">树形DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9DP"><span class="toc-number">6.6.</span> <span class="toc-text">状态压缩DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E5%8C%85"><span class="toc-number">6.7.</span> <span class="toc-text">背包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E5%BD%A2DP-1"><span class="toc-number">6.8.</span> <span class="toc-text">树形DP</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95"><span class="toc-number">7.</span> <span class="toc-text">字符串算法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E6%A0%91"><span class="toc-number">7.1.</span> <span class="toc-text">字典树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#manacher%E7%AE%97%E6%B3%95"><span class="toc-number">7.2.</span> <span class="toc-text">manacher算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#KMP"><span class="toc-number">7.3.</span> <span class="toc-text">KMP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AC%E8%87%AA%E5%8A%A8%E6%9C%BA"><span class="toc-number">7.4.</span> <span class="toc-text">AC自动机</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E8%AE%BA"><span class="toc-number">8.</span> <span class="toc-text">图论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8FSCC"><span class="toc-number">8.1.</span> <span class="toc-text">强连通分量SCC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MST%E9%97%AE%E9%A2%98-%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91"><span class="toc-number">8.2.</span> <span class="toc-text">MST问题(最小生成树)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86-1"><span class="toc-number">8.3.</span> <span class="toc-text">树链剖分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86%E6%B1%82lca"><span class="toc-number">8.3.1.</span> <span class="toc-text">树链剖分求lca</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E7%9F%AD%E8%B7%AF"><span class="toc-number">8.4.</span> <span class="toc-text">最短路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E5%9B%BE%E6%9C%80%E7%9F%AD%E8%B7%AF"><span class="toc-number">8.4.1.</span> <span class="toc-text">分层图最短路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E7%9F%AD%E8%B7%AF%E6%A0%91-%E5%9B%BE"><span class="toc-number">8.4.2.</span> <span class="toc-text">最短路树(图)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%AE%E5%88%86%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.4.3.</span> <span class="toc-text">差分约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AC%A1%E7%9F%AD%E8%B7%AF"><span class="toc-number">8.4.4.</span> <span class="toc-text">次短路</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Floyd"><span class="toc-number">8.5.</span> <span class="toc-text">Floyd</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E9%97%AD%E5%8C%85"><span class="toc-number">8.5.1.</span> <span class="toc-text">传递闭包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E7%9F%AD%E8%B7%AF-amp-%E6%9C%80%E9%95%BF%E8%B7%AF"><span class="toc-number">8.5.2.</span> <span class="toc-text">最短路&amp;最长路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Floyd%E5%92%8C%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82"><span class="toc-number">8.5.3.</span> <span class="toc-text">Floyd和矩阵快速幂</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Floyd%E6%B1%82%E6%97%A0%E5%90%91%E5%9B%BE%E6%9C%80%E5%B0%8F%E7%8E%AF"><span class="toc-number">8.5.4.</span> <span class="toc-text">Floyd求无向图最小环</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E5%9B%BE%E6%8A%80%E5%B7%A7"><span class="toc-number">8.6.</span> <span class="toc-text">建图技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E7%82%B9%E8%BF%9E%E8%BE%B9"><span class="toc-number">8.6.1.</span> <span class="toc-text">虚点连边</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%B5%81"><span class="toc-number">8.7.</span> <span class="toc-text">网络流</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">9.</span> <span class="toc-text">数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E6%9F%A5%E9%9B%86"><span class="toc-number">9.1.</span> <span class="toc-text">并查集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E8%B0%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">9.2.</span> <span class="toc-text">单调数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%B0%83%E6%A0%88"><span class="toc-number">9.2.1.</span> <span class="toc-text">单调栈</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97"><span class="toc-number">9.2.2.</span> <span class="toc-text">单调队列</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97%E4%BC%98%E5%8C%96DP"><span class="toc-number">9.2.2.1.</span> <span class="toc-text">单调队列优化DP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%A6%E6%A0%B9%E5%8F%B7%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">9.3.</span> <span class="toc-text">带根号的数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%AB%E9%98%9F"><span class="toc-number">9.3.1.</span> <span class="toc-text">莫队</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%A6%E5%AF%B9%E6%95%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">9.4.</span> <span class="toc-text">带对数的数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E6%AE%B5%E6%A0%91-1"><span class="toc-number">9.4.1.</span> <span class="toc-text">线段树</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%88%86%E6%B2%BB"><span class="toc-number">9.4.1.1.</span> <span class="toc-text">线段树分治</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B3%E8%A1%A1%E6%A0%91"><span class="toc-number">9.4.2.</span> <span class="toc-text">平衡树</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6"><span class="toc-number">10.</span> <span class="toc-text">数学</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E8%AE%BA"><span class="toc-number">10.1.</span> <span class="toc-text">数论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95"><span class="toc-number">10.2.</span> <span class="toc-text">计算几何</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E6%80%A7%E5%9F%BA"><span class="toc-number">10.3.</span> <span class="toc-text">线性基</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E7%BA%A7%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0"><span class="toc-number">10.4.</span> <span class="toc-text">初级线性代数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A9%E9%98%B5"><span class="toc-number">10.4.1.</span> <span class="toc-text">矩阵</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E7%8E%87%E6%9C%9F%E6%9C%9B"><span class="toc-number">10.5.</span> <span class="toc-text">概率期望</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%9F%E6%9C%9BDP"><span class="toc-number">10.5.1.</span> <span class="toc-text">期望DP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%E7%9A%84%E6%9C%80%E5%90%8E"><span class="toc-number">11.</span> <span class="toc-text">最后的最后</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/10/31/computerNetworking/" title="Computer Networking"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F911%2F100G5120150%2F15100G20150-8-1200.jpg&amp;refer=http%3A%2F%2Fimg.jj20.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1638695731&amp;t=99236346a3f7f0be2fa9fb241bd94d66" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Computer Networking"/></a><div class="content"><a class="title" href="/2022/10/31/computerNetworking/" title="Computer Networking">Computer Networking</a><time datetime="2022-10-31T00:17:23.000Z" title="发表于 2022-10-31 08:17:23">2022-10-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/21/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%81%9A%E5%85%A8%E6%A0%88%E7%9A%84%E6%88%91/" title="第二次做全栈的我"><img src="/img/programmer.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第二次做全栈的我"/></a><div class="content"><a class="title" href="/2022/10/21/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%81%9A%E5%85%A8%E6%A0%88%E7%9A%84%E6%88%91/" title="第二次做全栈的我">第二次做全栈的我</a><time datetime="2022-10-21T15:40:16.000Z" title="发表于 2022-10-21 23:40:16">2022-10-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/12/Vue/" title="Vue"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2018-11-06%2F5be1579bc7da3.jpg%3Fdown&amp;refer=http%3A%2F%2Fpic1.win4000.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1638695731&amp;t=4532ee56537217508d6298ed431ff2eb" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue"/></a><div class="content"><a class="title" href="/2022/10/12/Vue/" title="Vue">Vue</a><time datetime="2022-10-12T15:23:56.000Z" title="发表于 2022-10-12 23:23:56">2022-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/12/Sanic/" title="Sanic"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F911%2F100G5120150%2F15100G20150-8-1200.jpg&amp;refer=http%3A%2F%2Fimg.jj20.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1638695731&amp;t=99236346a3f7f0be2fa9fb241bd94d66" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sanic"/></a><div class="content"><a class="title" href="/2022/10/12/Sanic/" title="Sanic">Sanic</a><time datetime="2022-10-12T08:40:45.000Z" title="发表于 2022-10-12 16:40:45">2022-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/10/Socket%E7%BC%96%E7%A8%8B/" title="Socket 编程"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201707%2F04%2F20170704184913_GNYCE.thumb.700_0.jpeg&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1638696115&amp;t=a486b1dc327c953b973545deccf5835a" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Socket 编程"/></a><div class="content"><a class="title" href="/2022/10/10/Socket%E7%BC%96%E7%A8%8B/" title="Socket 编程">Socket 编程</a><time datetime="2022-10-10T03:46:14.000Z" title="发表于 2022-10-10 11:46:14">2022-10-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By AndrewLee</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/js/mouse_snow.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>